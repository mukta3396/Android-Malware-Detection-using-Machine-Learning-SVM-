import csv
import numpy as np 
import pandas as pd 

df=pd.read_csv('Feature.csv')
f=open('TemporaryDict','rU')
#cw=csv.writer(open("Feature.csv",'w'))
CsvHeaders= ["ACCES_MOCK_LOCATION", "ACCESS_ALL_DOWNLOADS", "ACCESS_ASSISTED_GPS", "ACCESS_BACKGROUND_SERVICE", "ACCESS_CACHE_FILESYSTEM", "ACCESS_CELL_ID", "ACCESS_COARSE", "ACCESS_COARSE_LOCATION", "ACCESS_COARSE_UPDATES", "ACCESS_DOWNLOAD_MANAGER", "ACCESS_DOWNLOAD_MANAGER_ADVANCED", "ACCESS_DRM", "ACCESS_FINE_LOCATION", "ACCESS_GPS", "ACCESS_LOCATION", "ACCESS_LOCATION_EXTRA_COMMANDS", "ACCESS_LOCATTON_MOCK_LOCATION", "ACCESS_MOCK_LOCATION", "ACCESS_NETWORK_STATE", "ACCESS_SUPERUSER", "ACCESS_WEATHERCLOCK_PROVIDER", "access_wifi_state", "ACCESS_WIFI_STATE", "ACCESS_WIMAX_STATE", "ACTION_MANAGE_OVERLAY_PERMISSION", "ADD_GEOCODE", "ADD_SYSTEM_SERVICE", "ALLOW_MOCK_LOCATIONS", "AUTHENTICATE_ACCOUNTS", "BATTERY_STATS", "BIND_ACCESSIBILITY_SERVICE", "BIND_APPWIDGET", "BIND_NOTIFICATION_LISTENER_SERVICE", "BIND_REMOTEVIEWS", "BLUETOOTH", "BLUETOOTH_ADMIN", "BLUETOOTH_PRIVILEGED", "BOOT_COMPLETED", "BRICK", "BROADCAST_SMS", "BROADCAST_STICKY", "BROADCAST_WAP_PUSH", "C2D_MESSAGE", "CALL_PHONE", "CALL_PRIVILEGED", "CAMERA", "CHANGE_COMPONENT_ENABLED_STATE", "CHANGE_CONFIGURATION", "CHANGE_NETWORK_STATE", "CHANGE_WIFI_MULTICAST_STATE", "CHANGE_WIFI_STATE", "CHANGE_WIMAX_STATE", "CLEAR_APP_CACHE", "CLEAR_APP_USER_DATA", "CONTROL_LOCATION_UPDATES", "DELETE_CACHE_FILES", "DELETE_PACKAGES", "DEVICE_POWER", "DISABLE_KEYGUARD", "DOWNLOAD_WITHOUT_NOTIFICATION", "EXPAND_STATUS_BAR", "FACTORY_TEST", "FINE_LOCATION", "FLASHLIGHT", "GET_ACCOUNTS", "GET_PACKAGE_SIZE", "GET_TASKS", "GLOBAL_SEARCH_CONTROL", "HARDWARE_TEST", "INJECT_EVENTS", "INSTALL_DRM", "install_packages", "INSTALL_PACKAGES", "INTERACT_ACROSS_USERS", "INTERACT_ACROSS_USERS_FULL", "INTERNAL_SYSTEM_WINDOW", "internet", "INTERNET", "KILL_BACKGROUND_PROCESSES", "LOCATION", "MANAGE_ACCOUNTS", "MANAGE_APP_TOKENS", "MANAGE_DOCUMENTS", "MANAGE_USERS", "MEDIA_CONTENT_CONTROL", "MODIFY_AUDIO_SETTINGS", "MODIFY_PHONE_STATE", "MOUNT_FORMAT_FILESYSTEMS", "MOUNT_UNMOUNT_FILESYSTEMS", "NETWORK", "NFC", "PACKAGE_USAGE_STATS", "PERMISSION_NAME", "PERSISTENT_ACTIVITY", "PREVENT_POWER_KEY", "PROCESS_INCOMING_CALLS", "PROCESS_OUTGOING_CALLS", "QUICKBOOT_POWERON", "RAISED_THREAD_PRIORITY", "READ_APN_SETTINGS", "READ_CALENDAR", "READ_CALL_LOG", "READ_CONTACTS", "READ_EXTERNAL_STORAGE", "READ_FRAME_BUFFER", "READ_LOGS", "READ_OWNER_DATA", "READ_PHONE_STATE", "READ_PRECISE_PHONE_STATE", "READ_PRIVILEGED_PHONE_STATE", "READ_PROFILE", "READ_SECURE_SETTINGS", "READ_SMS", "READ_SYNC_SETTINGS", "READ_SYNC_STATS", "READ_USER_DICTIONARY", "REBOOT", "RECEIVE_BOOT_COMPLETED", "RECEIVE_MMS", "RECEIVE_SMS", "RECEIVE_USER_PRESENT", "RECEIVE_WAP_PUSH", "RECORD_AUDIO", "RECORD_VIDEO", "REORDER_TASKS", "REQUEST_INSTALL_PACKAGES", "RESTART_PACKAGES", "RUN_INSTRUMENTATION", "SEND_DOWNLOAD_COMPLETED_INTENTS", "SEND_SMS", "SET_DEBUG_APP", "SET_ORIENTATION", "SET_PREFERRED_APPLICATIONS", "SET_WALLPAPER", "SET_WALLPAPER_HINTS", "STATUS_BAR", "STORAGE", "SUBSCRIBED_FEEDS_READ", "SUBSCRIBED_FEEDS_WRITE", "SYSTEM_ALERT_WINDOW", "SYSTEM_OVERLAY_WINDOW", "UPDATE_APP_OPS_STATS", "UPDATE_DEVICE_STATS", "USE_CREDENTIALS", "USE_FINGERPRINT", "USES_POLICY_FORCE_LOCK", "USES_POLICY_REBOOT", "VIBRATE", "WAKE_LOCK", "WRITE_APN_SETTINGS", "WRITE_CALENDAR", "WRITE_CALL_LOG", "WRITE_CONTACTS", "WRITE_EXTERNAL_STORAGE", "WRITE_INTERNAL_STORAGE", "WRITE_MEDIA_STORAG", "WRITE_MEDIA_STORAGE", "WRITE_OWNER_DATA", "WRITE_PROFILE", "WRITE_SECURE", "WRITE_SECURE_SETTINGS", "WRITE_SETTINGS", "WRITE_SMS", "WRITE_SYNC_SETTINGS", "WRITE_USER_DICTIONARY"]

Permissions=set()
DistinctPermissions=set()
AppsDictionary={}
for line in f:
	AppApk,AppPermissions=line.split(":")
	AppsDictionary[AppApk]=AppPermissions

i=-1
for AppApk in AppsDictionary: #For a particular app
	i=i+1
	PermString=AppsDictionary[AppApk]
	PermString=PermString[1:-2]
	PermsList=PermString.split(', ')
	for Perm in PermsList:# Permissions of the ith app		
		
		for header in CsvHeaders:
			if(Perm.startswith("\'android.permission.")):
				if(Perm[20:-1]==header):
					df.loc[i,header]=1
	

df.fillna(0, inplace=True)				
	

df.to_csv('out5.csv')



